"use client";
import { useAppDispatch, useAppSelector } from '@/redux/hooks';
import { 
    selectAllLocations, 
    fetchLocations,
  } from '@/redux/slices/locationsSlice';
import { useEffect } from 'react';
import Link from 'next/link';
const FloatingButton = () => {
    const locations = useAppSelector(selectAllLocations);
    const dispatch = useAppDispatch();
    useEffect(() => {
        if (locations.length === 0) {
            dispatch(fetchLocations());
        }
    }, [dispatch, locations.length]);
    return (
        <>
            <a href="/contact-us#visit-us" className='floating-button'>
                <svg xmlns="http://www.w3.org/2000/svg" width={30} height={30} viewBox="0 0 30 30" fill="none">
                    <path d="M8.87642 0.232422C4.63673 0.232422 0.875002 3.22809 0.030533 7.34867C-0.134567 8.15388 0.386669 8.95046 1.18831 9.11627C1.98995 9.28192 2.78328 8.75846 2.94824 7.95339C3.51052 5.20971 6.0503 3.20918 8.87642 3.20918C9.69495 3.20918 10.3585 2.54284 10.3585 1.7208C10.3585 0.89877 9.69495 0.232422 8.87642 0.232422ZM20.7328 0.232423C19.9142 0.232423 19.2507 0.898771 19.2507 1.7208C19.2507 2.54284 19.9142 3.20918 20.7328 3.20918C23.5621 3.20918 26.1486 5.2054 26.7073 7.9534C26.871 8.75876 27.6652 9.28058 28.4673 9.11627C29.2692 8.9518 29.7888 8.15418 29.625 7.34867C28.7859 3.22154 24.9775 0.232423 20.7328 0.232423ZM14.8046 3.20918C7.43794 3.20918 1.46619 9.20646 1.46619 16.6046C1.46619 19.746 2.58098 22.6924 4.38404 24.9767L1.92933 27.4418C1.35059 28.0232 1.35059 29.0001 1.92933 29.5815C2.50807 30.1627 3.43464 30.1161 4.01353 29.5349L6.46809 27.0697C8.74273 28.8805 11.6766 30 14.8046 30C17.9326 30 20.8665 28.834 23.1411 27.0233L25.642 29.5815C26.2208 30.1627 27.1474 30.1161 27.7262 29.5349C28.305 28.9537 28.2586 28.0232 27.6799 27.4418L25.2253 24.9303C27.0015 22.7675 28.143 19.746 28.143 16.6046C28.143 9.20646 22.1712 3.20918 14.8046 3.20918ZM14.8046 6.18594C20.5342 6.18594 25.1789 10.8505 25.1789 16.6046C25.1789 22.3587 20.5342 27.0233 14.8046 27.0233C9.07501 27.0233 4.43028 22.3587 4.43028 16.6046C4.43028 10.8505 9.07501 6.18594 14.8046 6.18594ZM14.8046 9.1627C13.9861 9.1627 13.3226 9.82905 13.3225 10.6511L13.3225 15.1162L8.87641 15.1162C8.05788 15.1162 7.39437 15.7826 7.39437 16.6046C7.39437 17.4266 8.05788 18.093 8.87641 18.093L14.8046 18.093C15.6231 18.093 16.2866 17.4266 16.2866 16.6046L16.2866 10.6511C16.2866 9.82905 15.6231 9.1627 14.8046 9.1627Z" fill="#302864" />
                </svg>
                <span>Book a tour</span>
            </a>
            <div className="floating-button__chat">
                <div className="button">
                    <svg xmlns="http://www.w3.org/2000/svg" width={30} height={30} viewBox="0 0 30 30" fill="none">
                        <g clipPath="url(#clip0_1399_3200)">
                            <path d="M29.77 14.6141C29.77 22.6846 23.2271 29.2272 15.1544 29.2272C12.5926 29.2272 10.1861 28.5669 8.0912 27.4106L0 30L2.63753 22.1574C1.3076 19.9563 0.541679 17.3718 0.541679 14.6131C0.542649 6.54254 7.08357 0 15.1563 0C23.2281 0.0019565 29.77 6.54352 29.77 14.6141ZM15.1534 2.33019C8.37855 2.33019 2.8676 7.84165 2.8676 14.617C2.8676 17.3052 3.73739 19.7939 5.20808 21.8189L3.67429 26.3805L8.39408 24.8691C10.3356 26.1525 12.6586 26.8999 15.1534 26.8999C21.9283 26.8999 27.4412 21.3894 27.4412 14.6141C27.4431 7.84165 21.9292 2.33019 15.1534 2.33019ZM22.535 17.9802C22.4437 17.8325 22.2049 17.7425 21.8477 17.5625C21.4914 17.3825 19.7276 16.5168 19.4004 16.3994C19.0704 16.2791 18.8316 16.2184 18.5928 16.5774C18.3569 16.9364 17.6696 17.7425 17.4589 17.9832C17.2502 18.2228 17.0415 18.2532 16.6833 18.0761C16.3251 17.8942 15.1699 17.5185 13.8012 16.2986C12.7362 15.3478 12.0169 14.1768 11.8092 13.8178C11.5985 13.4597 11.7878 13.2661 11.9655 13.088C12.1256 12.9266 12.3237 12.6693 12.5033 12.459C12.6829 12.2506 12.7421 12.1029 12.8615 11.8632C12.9789 11.6236 12.9197 11.4152 12.8314 11.2342C12.7421 11.0542 12.0266 9.29338 11.7267 8.57632C11.4286 7.86024 11.1306 7.97861 10.9209 7.97861C10.7122 7.97861 10.4734 7.94926 10.2346 7.94926C9.99582 7.94926 9.60752 8.03633 9.28037 8.39534C8.95323 8.75436 8.02713 9.62011 8.02713 11.3829C8.02713 13.1477 9.30949 14.8489 9.48908 15.0876C9.66964 15.3253 11.9684 19.0612 15.6097 20.4953C19.2529 21.9285 19.2529 21.4501 19.9091 21.3894C20.5673 21.3288 22.0292 20.5237 22.3263 19.6883C22.6253 18.8489 22.6253 18.1299 22.535 17.9802Z" fill="#302864" />
                        </g>
                        <defs>
                            <clipPath id="clip0_1399_3200">
                            <rect width="29.77" height={30} fill="white" />
                            </clipPath>
                        </defs>
                    </svg>
                    <span>Chat with us</span>
                </div>
                <div className="btn-area">
                    {locations.map((location) => (
                        <Link key={location.slug} href={`/locations/${location.slug}`} className='btn-area__item'>
                            {location.label}
                        </Link>
                    ))}
                </div>
            </div>
        </>
    );
}

export default FloatingButton;